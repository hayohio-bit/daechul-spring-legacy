# ğŸ—„ï¸ Part 4: ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„

## 1. í…Œì´ë¸” êµ¬ì¡° ê°œìš”

ì´ í”„ë¡œì íŠ¸ëŠ” ì´ **5ê°œì˜ í…Œì´ë¸”**ì„ ì‚¬ìš©í•´ìš”.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         í…Œì´ë¸” ê´€ê³„ë„                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚    â”‚   members   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ member_rolesâ”‚                     â”‚
â”‚    â”‚  (íšŒì› ì •ë³´) â”‚  1 : N   â”‚ (íšŒì› ê¶Œí•œ)  â”‚                     â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚           â”‚                                                     â”‚
â”‚           â”‚ 1 : N                                               â”‚
â”‚           â–¼                                                     â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚    â”‚    board    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚    reply    â”‚                     â”‚
â”‚    â”‚ (ê²Œì‹œê¸€ ì •ë³´)â”‚  1 : N   â”‚ (ëŒ“ê¸€ ì •ë³´) â”‚                     â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚                                                                 â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        â”‚
â”‚    â”‚ persistent_loginsâ”‚  â† "ë¡œê·¸ì¸ ìœ ì§€" ê¸°ëŠ¥ìš©                  â”‚
â”‚    â”‚  (Remember Me)   â”‚                                         â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                        â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

```sql

-- ============================================

-- daechul-SF ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì • ìŠ¤í¬ë¦½íŠ¸

-- MySQL 8.xìš©

-- ============================================

  

-- 1. ë°ì´í„°ë² ì´ìŠ¤ ìƒì„±

CREATE DATABASE IF NOT EXISTS daechuldb

DEFAULT CHARACTER SET utf8mb4

COLLATE utf8mb4_unicode_ci;

  

-- 2. ì‚¬ìš©ì ìƒì„± ë° ê¶Œí•œ ë¶€ì—¬

CREATE USER IF NOT EXISTS 'daechuluser'@'localhost' IDENTIFIED BY '1234';

GRANT ALL PRIVILEGES ON daechuldb.* TO 'daechuluser'@'localhost';

FLUSH PRIVILEGES;

  

-- 3. ë°ì´í„°ë² ì´ìŠ¤ ì‚¬ìš©

USE daechuldb;

```

---

## 2. ê° í…Œì´ë¸” ìƒì„¸ ì„¤ëª…

### 2.1 íšŒì› í…Œì´ë¸” (members)

íšŒì›ì˜ ê¸°ë³¸ ì •ë³´ë¥¼ ì €ì¥í•´ìš”.

```sql
CREATE TABLE members (
    id VARCHAR(50) PRIMARY KEY,           -- íšŒì› ì•„ì´ë”” (ê³ ìœ  í‚¤)
    password VARCHAR(200) NOT NULL,       -- ì•”í˜¸í™”ëœ ë¹„ë°€ë²ˆí˜¸
    name VARCHAR(100) NOT NULL,           -- íšŒì› ì´ë¦„
    email VARCHAR(200) NOT NULL,          -- ì´ë©”ì¼
    role VARCHAR(20) DEFAULT 'MEMBER',    -- ê¶Œí•œ (MEMBER ë˜ëŠ” ADMIN)
    phone VARCHAR(20),                    -- ì „í™”ë²ˆí˜¸ (ì„ íƒ)
    regdate TIMESTAMP DEFAULT NOW(),      -- ê°€ì…ì¼ì‹œ (ìë™ ì…ë ¥)
    enabled BOOLEAN DEFAULT TRUE          -- ê³„ì • í™œì„±í™” ì—¬ë¶€
);
```

**í•„ë“œ ì„¤ëª…:**

| í•„ë“œëª… | íƒ€ì… | ì„¤ëª… | ì˜ˆì‹œ |
|--------|------|------|------|
| id | VARCHAR(50) | ë¡œê·¸ì¸ì— ì‚¬ìš©í•˜ëŠ” ì•„ì´ë”” | "user01", "admin" |
| password | VARCHAR(200) | BCryptë¡œ ì•”í˜¸í™”ëœ ë¹„ë°€ë²ˆí˜¸ | "$2a$10$..." |
| name | VARCHAR(100) | ì‹¤ëª… ë˜ëŠ” ë‹‰ë„¤ì„ | "í™ê¸¸ë™" |
| email | VARCHAR(200) | ì´ë©”ì¼ ì£¼ì†Œ | "<user@test.com>" |
| role | VARCHAR(20) | ê¶Œí•œ êµ¬ë¶„ | "MEMBER" ë˜ëŠ” "ADMIN" |
| phone | VARCHAR(20) | ì—°ë½ì²˜ (ì„ íƒ) | "010-1234-5678" |
| regdate | TIMESTAMP | ê°€ì…í•œ ë‚ ì§œ/ì‹œê°„ | 2024-01-15 10:30:00 |
| enabled | BOOLEAN | ê³„ì • ì‚¬ìš© ê°€ëŠ¥ ì—¬ë¶€ | true / false |

---

### 2.2 íšŒì› ê¶Œí•œ í…Œì´ë¸” (member_roles)

Spring Securityì—ì„œ ì‚¬ìš©í•˜ëŠ” ê¶Œí•œ ì •ë³´ì˜ˆìš”.  
í•œ íšŒì›ì´ ì—¬ëŸ¬ ê¶Œí•œì„ ê°€ì§ˆ ìˆ˜ ìˆì–´ìš” (ì˜ˆ: ê´€ë¦¬ìì´ë©´ì„œ ì¼ë°˜íšŒì›).

```sql
CREATE TABLE member_roles (
    id VARCHAR(50) NOT NULL,              -- íšŒì› ì•„ì´ë””
    role VARCHAR(50) NOT NULL,            -- ê¶Œí•œ ì´ë¦„
    PRIMARY KEY (id, role),               -- ë³µí•© í‚¤ (ë‘˜ ë‹¤ í•©ì³ì„œ ê³ ìœ )
    FOREIGN KEY (id) REFERENCES members(id) ON DELETE CASCADE
);
```

**ê¶Œí•œ ê°’:**

- `ROLE_MEMBER` : ì¼ë°˜ íšŒì›
- `ROLE_ADMIN` : ê´€ë¦¬ì

> ğŸ’¡ **ì™œ "ROLE_"ì´ ë¶™ë‚˜ìš”?**  
> Spring Securityì—ì„œ ê¶Œí•œì„ ì²´í¬í•  ë•Œ ìë™ìœ¼ë¡œ "ROLE_" ì ‘ë‘ì‚¬ë¥¼ ë¶™ì—¬ì„œ í™•ì¸í•´ìš”.

---

### 2.3 ê²Œì‹œíŒ í…Œì´ë¸” (board)

ê²Œì‹œê¸€ ì •ë³´ë¥¼ ì €ì¥í•´ìš”.

```sql
CREATE TABLE board (
    seq INT AUTO_INCREMENT PRIMARY KEY,   -- ê¸€ ë²ˆí˜¸ (ìë™ ì¦ê°€)
    writer VARCHAR(50) NOT NULL,          -- ì‘ì„±ì ì•„ì´ë””
    title VARCHAR(500) NOT NULL,          -- ê¸€ ì œëª©
    content TEXT NOT NULL,                -- ê¸€ ë‚´ìš©
    hit INT DEFAULT 0,                    -- ì¡°íšŒìˆ˜
    regdate TIMESTAMP DEFAULT NOW(),      -- ì‘ì„±ì¼ì‹œ
    updatedate TIMESTAMP DEFAULT NOW()    -- ìˆ˜ì •ì¼ì‹œ
        ON UPDATE CURRENT_TIMESTAMP,
    delflag BOOLEAN DEFAULT FALSE,        -- ì‚­ì œ ì—¬ë¶€ (ë…¼ë¦¬ì  ì‚­ì œ)
    FOREIGN KEY (writer) REFERENCES members(id) ON DELETE CASCADE
);
```

**í•„ë“œ ì„¤ëª…:**

| í•„ë“œëª… | íƒ€ì… | ì„¤ëª… | ì˜ˆì‹œ |
|--------|------|------|------|
| seq | INT | ê¸€ ê³ ìœ  ë²ˆí˜¸ (ìë™ ìƒì„±) | 1, 2, 3, ... |
| writer | VARCHAR(50) | ì‘ì„±í•œ íšŒì› ì•„ì´ë”” | "user01" |
| title | VARCHAR(500) | ê¸€ ì œëª© | "ì²« ë²ˆì§¸ ê¸€ì…ë‹ˆë‹¤" |
| content | TEXT | ê¸€ ë‚´ìš© (ê¸´ ê¸€ ê°€ëŠ¥) | "ì•ˆë…•í•˜ì„¸ìš”..." |
| hit | INT | ì¡°íšŒìˆ˜ | 0, 1, 100, ... |
| regdate | TIMESTAMP | ì‘ì„± ì‹œê°„ | 2024-01-15 10:30:00 |
| updatedate | TIMESTAMP | ìˆ˜ì • ì‹œê°„ | 2024-01-16 14:00:00 |
| delflag | BOOLEAN | ì‚­ì œí‘œì‹œ | false(ë³´ì´ëŠ” ê¸€), true(ì‚­ì œëœ ê¸€) |

> ğŸ’¡ **delflagë€?**  
> ê¸€ì„ ì§„ì§œ ì‚­ì œí•˜ì§€ ì•Šê³ , "ì‚­ì œë¨" í‘œì‹œë§Œ í•´ìš”.  
> ì´ë ‡ê²Œ í•˜ë©´ ë‚˜ì¤‘ì— ë³µêµ¬í•  ìˆ˜ë„ ìˆê³ , ê¸°ë¡ë„ ë‚¨ì•„ìš”.  
> ì´ê²ƒì„ **"ë…¼ë¦¬ì  ì‚­ì œ"**ë¼ê³  í•´ìš”.

---

### 2.4 ëŒ“ê¸€ í…Œì´ë¸” (reply)

ê²Œì‹œê¸€ì— ë‹¬ë¦° ëŒ“ê¸€ ì •ë³´ë¥¼ ì €ì¥í•´ìš”.  
í•œ ê²Œì‹œê¸€ì— ì—¬ëŸ¬ ëŒ“ê¸€ì´ ë‹¬ë¦´ ìˆ˜ ìˆì–´ìš”.

```sql
CREATE TABLE reply (
    rno INT AUTO_INCREMENT PRIMARY KEY,   -- ëŒ“ê¸€ ë²ˆí˜¸ (ìë™ ì¦ê°€)
    bno INT NOT NULL,                      -- ê²Œì‹œê¸€ ë²ˆí˜¸ (ì™¸ë˜í‚¤)
    replyText VARCHAR(500) NOT NULL,      -- ëŒ“ê¸€ ë‚´ìš©
    replyer VARCHAR(50) NOT NULL,         -- ëŒ“ê¸€ ì‘ì„±ì ì•„ì´ë””
    replydate TIMESTAMP DEFAULT CURRENT_TIMESTAMP,  -- ëŒ“ê¸€ ì‘ì„±ì¼ì‹œ
    updatedate TIMESTAMP DEFAULT CURRENT_TIMESTAMP  -- ëŒ“ê¸€ ìˆ˜ì •ì¼ì‹œ
        ON UPDATE CURRENT_TIMESTAMP,
    deflag BOOLEAN DEFAULT FALSE,         -- ì‚­ì œ ì—¬ë¶€ (ë…¼ë¦¬ì  ì‚­ì œ)
    FOREIGN KEY (bno) REFERENCES board(seq) ON DELETE CASCADE
);
```

**í•„ë“œ ì„¤ëª…:**

| í•„ë“œëª…        | íƒ€ì…           | ì„¤ëª…               | ì˜ˆì‹œ                          |
| ---------- | ------------ | ---------------- | --------------------------- |
| rno        | INT          | ëŒ“ê¸€ ê³ ìœ  ë²ˆí˜¸ (ìë™ ìƒì„±) | 1, 2, 3, ...                |
| bno        | INT          | ëŒ“ê¸€ì´ ë‹¬ë¦° ê²Œì‹œê¸€ ë²ˆí˜¸    | 5, 10, 15, ...              |
| replyText  | VARCHAR(500) | ëŒ“ê¸€ ë‚´ìš©            | "ì¢‹ì€ ê¸€ ê°ì‚¬í•©ë‹ˆë‹¤"                |
| replyer    | VARCHAR(50)  | ëŒ“ê¸€ ì‘ì„±ì ì•„ì´ë””       | "user01"                    |
| replydate  | TIMESTAMP    | ëŒ“ê¸€ ì‘ì„± ì‹œê°„         | 2024-01-15 10:30:00         |
| updatedate | TIMESTAMP    | ëŒ“ê¸€ ìˆ˜ì • ì‹œê°„         | 2024-01-16 14:00:00         |
| deflag     | BOOLEAN      | ì‚­ì œí‘œì‹œ             | false(ë³´ì´ëŠ” ëŒ“ê¸€), true(ì‚­ì œëœ ëŒ“ê¸€) |

> ğŸ’¡ **ëŒ“ê¸€ë„ ë…¼ë¦¬ì  ì‚­ì œ**  
> ëŒ“ê¸€ë„ ê²Œì‹œê¸€ì²˜ëŸ¼ ì‹¤ì œë¡œ ì‚­ì œí•˜ì§€ ì•Šê³  deflagë¡œ í‘œì‹œë§Œ í•´ìš”.  
> ì´ë ‡ê²Œ í•˜ë©´ ë‚˜ì¤‘ì— ë³µêµ¬í•˜ê±°ë‚˜ í†µê³„ë¥¼ ë‚¼ ë•Œ ìœ ìš©í•´ìš”.

---

### 2.5 ë¡œê·¸ì¸ ìœ ì§€ í…Œì´ë¸” (persistent_logins)

"ë¡œê·¸ì¸ ìƒíƒœ ìœ ì§€" (Remember Me) ê¸°ëŠ¥ì„ ìœ„í•œ í…Œì´ë¸”ì´ì—ìš”.  
Spring Securityê°€ ìë™ìœ¼ë¡œ ê´€ë¦¬í•´ìš”.

```sql
CREATE TABLE persistent_logins (
    username VARCHAR(64) NOT NULL,        -- ì‚¬ìš©ì ì•„ì´ë””
    series VARCHAR(64) PRIMARY KEY,       -- ì‹œë¦¬ì¦ˆ í† í° (ê³ ìœ  í‚¤)
    token VARCHAR(64) NOT NULL,           -- ì¸ì¦ í† í°
    last_used TIMESTAMP NOT NULL          -- ë§ˆì§€ë§‰ ì‚¬ìš© ì‹œê°„
);
```

---

## 3. SQL ì¿¼ë¦¬ ëª¨ìŒ

### 3.1 íšŒì› ê´€ë ¨ ì¿¼ë¦¬ (MemberMapper.xml)

```sql
-- 1. ëª¨ë“  íšŒì› ì¡°íšŒ (ìµœì‹  ê°€ì…ìˆœ)
SELECT id, password, name, email, role, phone, regdate, enabled 
FROM members 
ORDER BY regdate DESC;

-- 2. ì•„ì´ë””ë¡œ íšŒì› ì¡°íšŒ
SELECT id, password, name, email, role, phone, regdate, enabled 
FROM members 
WHERE id = #{id};

-- 3. ì•„ì´ë”” ì¤‘ë³µ í™•ì¸ (íšŒì›ê°€ì… ì‹œ ì‚¬ìš©)
SELECT COUNT(*) 
FROM members 
WHERE id = #{id};
-- ê²°ê³¼ê°€ 0ì´ë©´ ì‚¬ìš© ê°€ëŠ¥, 1 ì´ìƒì´ë©´ ì¤‘ë³µ

-- 4. íšŒì› ë“±ë¡ (íšŒì›ê°€ì…)
INSERT INTO members (id, password, name, email, role, phone, enabled) 
VALUES (#{id}, #{password}, #{name}, #{email}, #{role}, #{phone}, true);

-- 5. íšŒì› ê¶Œí•œ ë“±ë¡
INSERT INTO member_roles (id, role) 
VALUES (#{id}, #{role});

-- 6. íšŒì› ì •ë³´ ìˆ˜ì •
UPDATE members 
SET email = #{email}, phone = #{phone} 
WHERE id = #{id};

-- 7. ë¹„ë°€ë²ˆí˜¸ ë³€ê²½
UPDATE members 
SET password = #{password} 
WHERE id = #{id};

-- 8. íšŒì› ì‚­ì œ
DELETE FROM members 
WHERE id = #{id};
```

---

### 3.2 ê²Œì‹œíŒ ê´€ë ¨ ì¿¼ë¦¬ (BoardMapper.xml)

```sql
-- 1. ëª¨ë“  ê²Œì‹œê¸€ ì¡°íšŒ (ìµœì‹ ìˆœ, ì‚­ì œ ì•ˆ ëœ ê²ƒë§Œ)
SELECT seq, writer, title, content, hit, regdate, updatedate, delflag
FROM board
WHERE delflag = false
ORDER BY seq DESC;

-- 2. ê²Œì‹œê¸€ ìƒì„¸ ì¡°íšŒ (ê¸€ ë²ˆí˜¸ë¡œ)
SELECT seq, writer, title, content, hit, regdate, updatedate, delflag
FROM board
WHERE seq = #{seq};

-- 3. ê²Œì‹œê¸€ ë“±ë¡
INSERT INTO board (writer, title, content)
VALUES (#{writer}, #{title}, #{content});

-- 4. ê²Œì‹œê¸€ ìˆ˜ì •
UPDATE board
SET title = #{title}, content = #{content}
WHERE seq = #{seq};

-- 5. ê²Œì‹œê¸€ ì‚­ì œ (ë…¼ë¦¬ì  ì‚­ì œ - ì‹¤ì œë¡œ ì§€ìš°ì§€ ì•ŠìŒ)
UPDATE board
SET delflag = true
WHERE seq = #{seq};

-- 6. ì¡°íšŒìˆ˜ ì¦ê°€
UPDATE board
SET hit = hit + 1
WHERE seq = #{seq};

-- 7. ê²Œì‹œê¸€ ëª©ë¡ ì¡°íšŒ (í˜ì´ì§•)
SELECT seq, writer, title, content, hit, regdate, updatedate, delflag
FROM board
WHERE delflag = false
ORDER BY seq DESC
LIMIT #{size} OFFSET #{skip};

-- 8. ì „ì²´ ê²Œì‹œê¸€ ìˆ˜ ì¡°íšŒ (í˜ì´ì§•ìš©)
SELECT COUNT(seq)
FROM board
WHERE delflag = false;
```

---

### 3.3 ëŒ“ê¸€ ê´€ë ¨ ì¿¼ë¦¬ (ReplyMapper.xml)

```sql
-- 1. ëŒ“ê¸€ ë“±ë¡
INSERT INTO reply(bno, replyText, replyer)
VALUES(#{bno}, #{replyText}, #{replyer});

-- 2. ëŒ“ê¸€ ì¡°íšŒ (ëŒ“ê¸€ ë²ˆí˜¸ë¡œ)
SELECT rno, replyText, replyer, replydate, updatedate, deflag, bno 
FROM reply 
WHERE rno = #{rno};

-- 3. ëŒ“ê¸€ ìˆ˜ì •
UPDATE reply
SET replyText = #{replyText}, updatedate = NOW()
WHERE rno = #{rno};

-- 4. ëŒ“ê¸€ ì‚­ì œ (ë…¼ë¦¬ì  ì‚­ì œ)
UPDATE reply
SET deflag = true 
WHERE rno = #{rno};

-- 5. ê²Œì‹œê¸€ì˜ ëŒ“ê¸€ ëª©ë¡ ì¡°íšŒ (í˜ì´ì§•)
SELECT 
    rno, 
    replyText, 
    replyer, 
    replydate AS replyDate, 
    updatedate AS updateDate, 
    deflag, 
    bno 
FROM reply
WHERE bno = #{bno} AND rno > 0 AND deflag = false
ORDER BY rno ASC
LIMIT #{size} OFFSET #{skip};

-- 6. ê²Œì‹œê¸€ì˜ ëŒ“ê¸€ ìˆ˜ ì¡°íšŒ (í˜ì´ì§•ìš©)
SELECT COUNT(rno) 
FROM reply
WHERE bno = #{bno} AND rno > 0 AND deflag = false;
```

---

## 4. ì¸ë±ìŠ¤ (ë¹ ë¥¸ ê²€ìƒ‰ì„ ìœ„í•œ ì„¤ì •)

ìì£¼ ê²€ìƒ‰í•˜ëŠ” ì»¬ëŸ¼ì— ì¸ë±ìŠ¤ë¥¼ ê±¸ë©´ ê²€ìƒ‰ ì†ë„ê°€ ë¹¨ë¼ì ¸ìš”!

```sql
-- ê²Œì‹œê¸€ ì‘ì„±ìë¡œ ê²€ìƒ‰ ë¹ ë¥´ê²Œ
CREATE INDEX idx_board_writer ON board(writer);

-- ê²Œì‹œê¸€ ì‘ì„±ì¼ ì •ë ¬ ë¹ ë¥´ê²Œ
CREATE INDEX idx_board_regdate ON board(regdate DESC);

-- íšŒì› ì´ë©”ì¼ ê²€ìƒ‰ ë¹ ë¥´ê²Œ
CREATE INDEX idx_members_email ON members(email);

-- íšŒì› ê¶Œí•œ ê²€ìƒ‰ ë¹ ë¥´ê²Œ
CREATE INDEX idx_members_role ON members(role);

-- ëŒ“ê¸€ì˜ ê²Œì‹œê¸€ ë²ˆí˜¸ë¡œ ê²€ìƒ‰ ë¹ ë¥´ê²Œ
CREATE INDEX idx_reply_bno ON reply(bno);

-- ëŒ“ê¸€ ì‘ì„±ì¼ ì •ë ¬ ë¹ ë¥´ê²Œ
CREATE INDEX idx_reply_regdate ON reply(replydate DESC);
```

---

## 5. í…ŒìŠ¤íŠ¸ ë°ì´í„°

ê°œë°œí•  ë•Œ í…ŒìŠ¤íŠ¸ìš© ë°ì´í„°ê°€ í•„ìš”í•´ìš”:

```sql
-- ê´€ë¦¬ì ê³„ì • (ë¹„ë°€ë²ˆí˜¸: admin123)
INSERT INTO members (id, password, name, email, role, phone, enabled) 
VALUES ('admin', '$2a$10$N.zmdr9rW6K7e1SyRzd/I.eFD0PnYMwZz.6YwQxZ.9Nv6ynO4qP2e', 
        'ê´€ë¦¬ì', 'admin@daechul.com', 'ADMIN', '010-1234-5678', true);
INSERT INTO member_roles (id, role) VALUES ('admin', 'ROLE_ADMIN');

-- ì¼ë°˜ íšŒì› ê³„ì • (ë¹„ë°€ë²ˆí˜¸: user123)
INSERT INTO members (id, password, name, email, role, phone, enabled) 
VALUES ('user01', '$2a$10$dXJ3SW6G7P50lGmMkkmwe.20cQQubK3.HZWzG3YB1tlRy.fqvM/BG', 
        'í™ê¸¸ë™', 'user01@daechul.com', 'MEMBER', '010-9876-5432', true);
INSERT INTO member_roles (id, role) VALUES ('user01', 'ROLE_MEMBER');

-- í…ŒìŠ¤íŠ¸ ê²Œì‹œê¸€
INSERT INTO board (writer, title, content) VALUES 
('admin', 'ê³µì§€ì‚¬í•­ì…ë‹ˆë‹¤', 'ëŒ€ì¶œ í”„ë¡œì íŠ¸ ê²Œì‹œíŒì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤.'),
('user01', 'ì²« ë²ˆì§¸ ê²Œì‹œê¸€', 'ê²Œì‹œíŒ í…ŒìŠ¤íŠ¸ ê¸€ì…ë‹ˆë‹¤.');

-- í…ŒìŠ¤íŠ¸ ëŒ“ê¸€
INSERT INTO reply (bno, replyText, replyer) VALUES 
(1, 'ì¢‹ì€ ì •ë³´ ê°ì‚¬í•©ë‹ˆë‹¤!', 'user01'),
(1, 'ê³µì§€ì‚¬í•­ í™•ì¸í–ˆìŠµë‹ˆë‹¤.', 'user01');
```

> âš ï¸ **ì£¼ì˜:** ìœ„ì˜ ë¹„ë°€ë²ˆí˜¸ë“¤ì€ BCryptë¡œ ì•”í˜¸í™”ëœ ê°’ì´ì—ìš”.  
> ì‹¤ì œë¡œ "admin123", "user123"ì„ ì…ë ¥í•˜ë©´ ë¡œê·¸ì¸ë¼ìš”.

---

## 6. DTOì™€ í…Œì´ë¸” ë§¤í•‘

Java ì½”ë“œì˜ DTO í´ë˜ìŠ¤ì™€ ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸”ì´ ì–´ë–»ê²Œ ì—°ê²°ë˜ëŠ”ì§€ ë³´ì—¬ë“œë¦´ê²Œìš”.

### MemberDTO â†” members í…Œì´ë¸”

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     MemberDTO.java     â”‚      members í…Œì´ë¸”      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  private String id     â”‚  id VARCHAR(50)         â”‚
â”‚  private String passwordâ”‚  password VARCHAR(200)  â”‚
â”‚  private String name   â”‚  name VARCHAR(100)      â”‚
â”‚  private String email  â”‚  email VARCHAR(200)     â”‚
â”‚  private String role   â”‚  role VARCHAR(20)       â”‚
â”‚  private String phone  â”‚  phone VARCHAR(20)      â”‚
â”‚  private LocalDateTime regdate â”‚  regdate TIMESTAMP â”‚
â”‚  private boolean enabledâ”‚  enabled BOOLEAN       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### BoardDTO â†” board í…Œì´ë¸”

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      BoardDTO.java     â”‚       board í…Œì´ë¸”       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  private int seq       â”‚  seq INT (PK)           â”‚
â”‚  private String writer â”‚  writer VARCHAR(50)     â”‚
â”‚  private String title  â”‚  title VARCHAR(500)     â”‚
â”‚  private String contentâ”‚  content TEXT           â”‚
â”‚  private int hit       â”‚  hit INT                â”‚
â”‚  private LocalDateTime regdate â”‚  regdate TIMESTAMP â”‚
â”‚  private LocalDateTime updatedate â”‚  updatedate TIMESTAMP â”‚
â”‚  private boolean delflagâ”‚  delflag BOOLEAN       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ReplyDTO â†” reply í…Œì´ë¸”

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      ReplyDTO.java     â”‚       reply í…Œì´ë¸”       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  private int rno       â”‚  rno INT (PK)           â”‚
â”‚  private int bno       â”‚  bno INT (FK)           â”‚
â”‚  private String replyText â”‚  replyText VARCHAR(500) â”‚
â”‚  private String replyerâ”‚  replyer VARCHAR(50)   â”‚
â”‚  private LocalDateTime replyDate â”‚  replydate TIMESTAMP â”‚
â”‚  private LocalDateTime updateDate â”‚  updatedate TIMESTAMP â”‚
â”‚  private boolean deflagâ”‚  deflag BOOLEAN        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### í˜ì´ì§• ê´€ë ¨ DTO

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  BoardListPaginDTO.java     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  List<BoardDTO> boardDTOListâ”‚  â† í˜„ì¬ í˜ì´ì§€ ê²Œì‹œê¸€ ëª©ë¡
â”‚  int totalCount            â”‚  â† ì „ì²´ ê²Œì‹œê¸€ ìˆ˜
â”‚  int page                   â”‚  â† í˜„ì¬ í˜ì´ì§€ ë²ˆí˜¸
â”‚  int size                   â”‚  â† í•œ í˜ì´ì§€ë‹¹ ê²Œì‹œê¸€ ìˆ˜
â”‚  int start                  â”‚  â† í˜ì´ì§€ ë¸”ë¡ ì‹œì‘ ë²ˆí˜¸
â”‚  int end                    â”‚  â† í˜ì´ì§€ ë¸”ë¡ ë ë²ˆí˜¸
â”‚  boolean prev               â”‚  â† ì´ì „ ë¸”ë¡ ì¡´ì¬ ì—¬ë¶€
â”‚  boolean next               â”‚  â† ë‹¤ìŒ ë¸”ë¡ ì¡´ì¬ ì—¬ë¶€
â”‚  List<Integer> pageNums     â”‚  â† í˜ì´ì§€ ë²ˆí˜¸ ë¦¬ìŠ¤íŠ¸
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ReplyListPaginDTO.java     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  List<ReplyDTO> replyDTOListâ”‚  â† í˜„ì¬ í˜ì´ì§€ ëŒ“ê¸€ ëª©ë¡
â”‚  int totalCount            â”‚  â† ì „ì²´ ëŒ“ê¸€ ìˆ˜
â”‚  int page                   â”‚  â† í˜„ì¬ í˜ì´ì§€ ë²ˆí˜¸
â”‚  int size                   â”‚  â† í•œ í˜ì´ì§€ë‹¹ ëŒ“ê¸€ ìˆ˜
â”‚  int start                  â”‚  â† í˜ì´ì§€ ë¸”ë¡ ì‹œì‘ ë²ˆí˜¸
â”‚  int end                    â”‚  â† í˜ì´ì§€ ë¸”ë¡ ë ë²ˆí˜¸
â”‚  boolean prev               â”‚  â† ì´ì „ ë¸”ë¡ ì¡´ì¬ ì—¬ë¶€
â”‚  boolean next               â”‚  â† ë‹¤ìŒ ë¸”ë¡ ì¡´ì¬ ì—¬ë¶€
â”‚  List<Integer> pageNums     â”‚  â† í˜ì´ì§€ ë²ˆí˜¸ ë¦¬ìŠ¤íŠ¸
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

ğŸ‘‰ **ë‹¤ìŒ: Part 5: ì½”ë“œ íë¦„** - ì‚¬ìš©ì ìš”ì²­ì´ ì–´ë–»ê²Œ ì²˜ë¦¬ë˜ëŠ”ì§€ ì „ì²´ íë¦„ ì„¤ëª…
